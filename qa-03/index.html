<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Zadanie QA-03 – Walidacja zapytań SQL</title>
    <link rel="stylesheet" href="styles.css" />
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"
      integrity="sha512-MV8Ko6VM1Y8tSvyMDeFf0TfaEsd/ulyJb57J5hUGNrT9vApTPy330VxkiX6HYKpZf0p4YJ3B7JLLalfMyyJxVQ=="
      crossorigin="anonymous"
    ></script>
    <script defer src="script.js"></script>
  </head>
  <body>
    <main class="layout">
      <section class="panel info">
        <header>
          <h1>Zadanie QA-03 — Walidacja zapytań SQL</h1>
          <p class="intro">
            Wykorzystaj zapytania SQL, aby uzyskać poprawne wyniki dla zadań
            poniżej. Dane testowe są osadzone w przeglądarce (SQLite uruchomione
            przez <code>sql.js</code>) i nie wymagają dodatkowej konfiguracji.
          </p>
        </header>

        <article class="card schema">
          <h2>Schemat danych</h2>
          <ul>
            <li>
              <strong>departments</strong> (<code>id</code>, <code>name</code>)
            </li>
            <li>
              <strong>employees</strong> (<code>id</code>, <code>first_name</code>, <code>last_name</code>, <code>department_id</code>, <code>salary</code>)
            </li>
            <li>
              <strong>timesheets</strong> (<code>id</code>, <code>employee_id</code>, <code>project_name</code>, <code>hours</code>)
            </li>
          </ul>
          <p class="hint">
            Wszystkie tabele są już wypełnione przykładowymi danymi — możesz je
            podejrzeć wykonując proste zapytania typu
            <code>SELECT * FROM employees;</code>
          </p>
        </article>

        <article class="card tasks">
          <h2>Zadania</h2>
          <ol>
            <li>
              <strong>Lista pracowników z działami</strong> — zwróć pełne imię i
              nazwisko pracownika, nazwę działu oraz pensję. Posortuj wynik
              rosnąco po nazwie działu, a w ramach działu po nazwisku.
            </li>
            <li>
              <strong>Średnie wynagrodzenie w działach</strong> — policz średnią
              pensję oraz liczbę pracowników na dział. Wyświetl jedynie działy z
              co najmniej 2 pracownikami i posortuj malejąco po średniej pensji.
            </li>
            <li>
              <strong>Duże projekty</strong> — zwróć nazwę działu, nazwę projektu
              i łączną liczbę godzin przepracowanych przez pracowników tego
              działu w projekcie. Uwzględnij projekty, w których przepracowano
              ponad 40 godzin, i posortuj wynik malejąco po liczbie godzin.
            </li>
          </ol>
        </article>
      </section>

      <section class="panel runner">
        <header class="card">
          <h2>Edytor SQL</h2>
          <p class="hint">
            Wybierz zadanie, napisz zapytanie i kliknij “Uruchom zapytanie”. Wynik
            pojawi się w tabeli poniżej.
          </p>
          <label class="task-selector">
            <span>Oceniamy zapytanie względem zadania:</span>
            <select id="task-select" aria-label="Wybierz zadanie do walidacji">
              <option value="task-1">1 — Lista pracowników z działami</option>
              <option value="task-2">2 — Średnie wynagrodzenie w działach</option>
              <option value="task-3">3 — Duże projekty</option>
            </select>
          </label>
        </header>

        <form class="card editor" id="sql-form">
          <textarea
            id="sql-input"
            name="sql"
            rows="10"
            aria-label="Pole edycji zapytania SQL"
            placeholder="SELECT ..."
          ></textarea>
          <div class="actions">
            <button type="submit" class="primary">Uruchom zapytanie</button>
            <button type="button" id="check-button">Porównaj z wzorcowym wynikiem</button>
            <button type="button" id="reset-button" class="ghost">Wyczyść</button>
          </div>
          <p class="status" id="status-message" role="status" aria-live="polite"></p>
        </form>

        <section class="card results" aria-live="polite">
          <h3>Wynik zapytania</h3>
          <div id="result-table" class="table-placeholder">
            <p>Brak wyników. Uruchom zapytanie, aby zobaczyć dane.</p>
          </div>
        </section>
      </section>
    </main>

    <footer class="footer">
      <small>Aplikacja demonstracyjna dla zadania rekrutacyjnego. Qbico sp. z o.o.</small>
    </footer>
  </body>
</html>


